<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZTE AI Dashboard - Ultra Fast Edition</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.0/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <div class="header-left">
                <h1>üöÄ ZTE AI Dashboard</h1>
                <span class="subtitle">Autonomous Speed Optimizer</span>
            </div>
            <div id="ollama-status-container" class="hidden">
                <span id="ollama-status" class="ollama-status">Checking Ollama...</span>
                <select id="ollama-model" style="margin-left:8px;"></select>
            </div>
        </header>

        <!-- Login Section -->
        <section id="login-section" class="card">
            <h3>üîê Connect to Router</h3>
            <div class="form-group" style="margin-top:8px;">
                <label>Router IP</label>
                <input type="text" id="ip-address" value="192.168.0.1" style="width:100%;">
            </div>
            <div class="form-group">
                <label>Admin Password</label>
                <input type="password" id="password" placeholder="Enter password" style="width:100%;">
            </div>
            <div class="form-group">
                <label>ü§ñ AI Model</label>
                <select id="login-ollama-model" style="width:100%;"></select>
                <span id="ollama-login-status" style="font-size:10px;">Checking...</span>
            </div>
            <button id="btn-connect" class="btn btn-primary" style="width:100%; margin-top:10px;">Connect
                Dashboard</button>
            <div id="login-error" class="error hidden" style="color:var(--accent-red); margin-top:5px;"></div>
        </section>

        <!-- Main Dashboard Layout -->
        <div id="dashboard" class="hidden">
            <!-- AI CONTROL (TOP) -->
            <section class="card ai-section">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <h3>ü§ñ AI ROUTER OPTIMIZER (FOCUS: DOWNLOAD SPEED)</h3>
                    <div style="display:flex; align-items:center; gap:12px;">
                        <div style="display:flex; align-items:center; gap:6px;">
                            <span style="font-weight:700; color:var(--accent-green); font-size:11px;">FULL AUTO
                                (3m):</span>
                            <label class="switch">
                                <input type="checkbox" id="auto-optimize-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <button class="btn btn-primary" id="btn-ai-recommend">üß† Run Analysis</button>
                    </div>
                </div>

                <div class="ai-dashboard-grid">
                    <div class="ai-activity-window">
                        <h3>üìù ACTIVITY LOG</h3>
                        <div id="ai-log" class="terminal-log"></div>
                    </div>
                    <div id="ai-recommendation" class="card ai-recommendation-card">
                        <h3>üí° AI RECOMMENDATION</h3>
                        <div id="ai-content" class="ai-content-body">Waiting for analysis...</div>
                        <div id="ai-actions" class="hidden">
                            <div class="btn-group">
                                <button class="btn btn-success hidden" id="btn-apply-lte">Apply LTE</button>
                                <button class="btn btn-success hidden" id="btn-apply-nr">Apply 5G</button>
                                <button class="btn btn-success hidden" id="btn-apply-mode">Apply Mode</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- LEFT COL: STATUS -->
            <div class="connection-info card">
                <h3>üìä STATUS</h3>
                <div class="info-row"><span class="label">ISP:</span> <span id="provider"
                        style="color:var(--accent-cyan)">-</span></div>
                <div class="info-row"><span class="label">Mode:</span> <span id="network-type" class="badge">-</span>
                </div>
                <div class="info-row"><span class="label">Active:</span> <span id="band-info"
                        style="font-size:10px;">-</span></div>
                <div class="info-row"><span class="label">WAN:</span> <span id="wan-ip" style="font-size:10px;">-</span>
                </div>
                <div class="info-row" id="temp-row"><span class="label">Temp:</span> <span id="temperatures">-</span>
                </div>
                <hr style="opacity:0.1; margin:6px 0;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <span id="connection-status" class="status-connected">‚óè ONLINE</span>
                    <button id="btn-disconnect" class="btn btn-danger">EXIT</button>
                </div>
            </div>

            <!-- MIDDLE COL: SIGNALS -->
            <div class="signal-grid card">
                <div id="lte-cells-container">
                    <h3>üì∂ LTE CELLS</h3>
                    <div id="lte-cells" class="cells-container"></div>
                </div>
                <div id="nr-cells-container"
                    style="margin-top:10px; border-top:1px solid rgba(255,255,255,0.05); padding-top:8px;">
                    <h3>üì° 5G NR CELLS</h3>
                    <div id="nr-cells" class="cells-container"></div>
                </div>
            </div>

            <!-- RIGHT COL: CONTROLS -->
            <div class="controls-grid">
                <!-- Modes -->
                <section class="card">
                    <h3>üåê MODES</h3>
                    <div class="btn-group">
                        <button class="btn btn-mode" data-mode="WL_AND_5G">AUTO</button>
                        <button class="btn btn-mode" data-mode="Only_5G">SA</button>
                        <button class="btn btn-mode" data-mode="LTE_AND_5G">NSA</button>
                        <button class="btn btn-mode" data-mode="Only_LTE">4G</button>
                    </div>
                </section>

                <!-- Bands -->
                <section class="card">
                    <h3>üìä BANDS (LTE / 5G)</h3>
                    <div class="btn-group" style="margin-bottom:6px;">
                        <button class="btn btn-band-lte" data-bands="AUTO">A</button>
                        <button class="btn btn-band-lte" data-bands="1">1</button>
                        <button class="btn btn-band-lte" data-bands="3">3</button>
                        <button class="btn btn-band-lte" data-bands="7">7</button>
                        <button class="btn btn-band-lte" data-bands="20">20</button>
                    </div>
                    <div style="display:flex; gap:4px; margin-bottom:4px;">
                        <input type="text" id="custom-lte-bands" placeholder="LTE Bands" style="flex:1;">
                        <button class="btn btn-primary" id="btn-custom-lte">SET</button>
                    </div>
                    <div style="display:flex; gap:4px;">
                        <input type="text" id="custom-nr-bands" placeholder="5G Bands" style="flex:1;">
                        <button class="btn btn-primary" id="btn-custom-nr">SET</button>
                    </div>
                </section>

                <!-- Locking -->
                <section class="card">
                    <h3>üîí PCI LOCK</h3>
                    <div style="display:flex; gap:4px; margin-bottom:4px;">
                        <span style="font-size:10px; min-width:25px;">LTE:</span>
                        <input type="number" id="lte-lock-pci" placeholder="PCI" style="width:40%;">
                        <input type="number" id="lte-lock-earfcn" placeholder="FREQ" style="width:40%;">
                        <button class="btn btn-primary" id="btn-lock-lte">L</button>
                        <button class="btn btn-secondary" id="btn-unlock-lte">U</button>
                    </div>
                    <div style="display:flex; gap:4px;">
                        <span style="font-size:10px; min-width:25px;">5G:</span>
                        <input type="number" id="nr-lock-pci" placeholder="PCI" style="width:30%;">
                        <input type="number" id="nr-lock-arfcn" placeholder="FREQ" style="width:30%;">
                        <input type="number" id="nr-lock-band" placeholder="B" style="width:15%;">
                        <input type="number" id="nr-lock-scs" value="30" style="display:none;">
                        <button class="btn btn-primary" id="btn-lock-nr">L</button>
                        <button class="btn btn-secondary" id="btn-unlock-nr">U</button>
                    </div>
                </section>

                <!-- Tools -->
                <section class="card">
                    <h3>üõ†Ô∏è TOOLS</h3>
                    <div class="tool-controls">
                        <div class="tool-group">
                            <span class="label">Bridge:</span>
                            <button class="btn btn-secondary btn-xs" id="btn-bridge-on">ON</button>
                            <button class="btn btn-secondary btn-xs" id="btn-bridge-off">OFF</button>
                        </div>
                        <div class="tool-group">
                            <span class="label">ARP:</span>
                            <button class="btn btn-secondary btn-xs" id="btn-arp-on">ON</button>
                            <button class="btn btn-secondary btn-xs" id="btn-arp-off">OFF</button>
                        </div>
                        <button class="btn btn-danger btn-xs" id="btn-reboot"
                            style="width:100%; margin-top:5px;">REBOOT</button>
                    </div>
                </section>
            </div>
        </div>

        <!-- Toast notifications -->
        <div id="toast-container" style="position:fixed; bottom:10px; right:10px; z-index:9999;"></div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>